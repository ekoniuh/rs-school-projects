(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+wUL":function(e,t,a){"use strict";a.r(t);const r={switchParameterState:"cases",isClickCountry:!1,isSwitchActive:null,isSwitchParameterPeriod:!1,isSwitchParameterValue:!1,keyValue:"cases"},s={countryData:[],nameCountry:null,keyParameterState:"cases",keyParameterPeriod:"deaths",keyParameterValue:"recovered",keyView:"",switchParameterState:"",isSwitchActive:null,isSwitchParameterPeriod:!1,isSwitchParameterValue:!1,defaultDataGlobal:[]},n={countryData:[],nameCountry:null,keyParameterState:"cases",keyParameterPeriod:"deaths",keyParameterValue:"recovered",keyView:"",switchParameterState:"cases",isSwitchActive:null,isSwitchParameterPeriod:!1,isSwitchParameterValue:!1,defaultDataGlobal:[]};function o(e){e.forEach(e=>{e.casesToday=e.todayCases,e.deathsToday=e.todayDeaths,e.recoveredToday=e.todayRecovered,e.casesPerOneHundredThousand=Number(Math.round(e.cases/e.population*1e5)),e.casesTodayPerOneHundredThousand=Number((e.todayCases/e.population*1e5).toFixed(3)),e.deathsPerOneHundredThousand=Number(Math.round(e.deaths/e.population*1e5)),e.deathsTodayPerOneHundredThousand=Number((e.todayDeaths/e.population*1e5).toFixed(3)),e.recoveredPerOneHundredThousand=Number(Math.round(e.recovered/e.population*1e5)),e.recoveredTodayPerOneHundredThousand=Number((e.todayRecovered/e.population*1e5).toFixed(3))})}function i(e,t){t[e].value.forEach((a,r)=>{r+1!==t.length&&(t[e+"Today"].value[r]=Math.abs(t[e].value[r+1]-a))}),t[e+"Today"].date=t[e].date,t[e+"Today"].value.pop(),t[e+"Today"].date.pop()}function c(e,t,a){t[e].value.forEach((r,s)=>{t[e+"PerOneHundredThousand"].value[s]=Number(Math.round(r/a*1e5).toFixed(3))}),t[e+"PerOneHundredThousand"].date=t[e].date,t[e+"Today"].value.forEach((r,s)=>{t[e+"TodayPerOneHundredThousand"].value[s]=Number(Math.round(r/a*1e5).toFixed(3))}),t[e+"TodayPerOneHundredThousand"].date=t[e].date}function d(e,t){Object.keys(e).forEach(a=>{"cases"===a&&(i(a,e),c(a,e,t)),"deaths"===a&&(i(a,e),c(a,e,t)),"recovered"===a&&(i(a,e),c(a,e,t))})}function l(e,t){e.sort((e,a)=>e[t]<a[t]?1:-1)}function u(e,t,a){let r="";return t&&a&&(r=e+"TodayPerOneHundredThousand",s.keyView="TodayPerOneHundredThousand"),t||a||(r=""+e,s.keyView=""),t&&!a&&(r=e+"Today",s.keyView="Today"),!t&&a&&(r=e+"PerOneHundredThousand",s.keyView="PerOneHundredThousand"),r}function h(e,t,a){return"cases"===e||"deaths"===e||"recovered"===e?u(e,t,a):e?"":u(e,t,a)}function y(e,t){const a=e.closest(".switch-change"),r=a.dataset.switch,s=a.dataset.active;switch(r){case"time-all":"true"===s?(t.isSwitchParameterPeriod=!1,a.dataset.active="false"):(t.isSwitchParameterPeriod=!0,a.dataset.active="true");break;case"absolute-value":"true"===s?(t.isSwitchParameterValue=!1,a.dataset.active="false"):(t.isSwitchParameterValue=!0,a.dataset.active="true")}}function p(){const e=document.getElementById("input-search").value.toUpperCase(),t=[...document.querySelectorAll(".country-item")];[...document.querySelectorAll(".country-name")].forEach((a,r)=>{a.innerHTML.toUpperCase().indexOf(e)>-1?t[r].classList.remove("country-item--none"):t[r].classList.add("country-item--none")})}function m(e){return`\n          <h2 class="global-title">TOTAL CASES</h2>\n          <span class="total-count">${e}</span>\n\t\t\t\t\t<span class="total-data">${(new Date).toJSON().slice(0,10).replace(/-/g,"/")}</span>\n\t\t\t\n  `}(new class{render(){const e=new L.map("sample",{center:[52.721219,41.452274],zoom:4,worldCopyJump:!0}),t=new L.TileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");e.addLayer(t)}}).render();document.getElementById("popChart");const v=new class{constructor(){this.countriesData=[],this.TotalConfirmedCountry=[],this.globalData=[],this.init()}async init(){await this.fetchCountries(),this.view&&this.view.render()}getCountriesData(){return this.countriesData&&l(this.countriesData,r.keyValue),this.countriesData.filter(e=>!("MS Zaandam"===e.country||"Diamond Princess"===e.country))}async fetchCountries(){try{const e=await fetch("https://disease.sh/v3/covid-19/countries");this.countriesData=await e.json(),o(this.countriesData)}catch(e){console.error(e)}}},w=new class{constructor(e){this.globalModel=e,this.globalModel.view=this,this.viewWrapper=document.createElement("table"),this.viewWrapper.className="table global-table"}render(){return this.viewWrapper.innerHTML=this.buildList(),this.viewWrapper}buildList(){return`<tbody>\n            ${this.globalModel.getCountriesData().map(e=>this.buildRow(e))}\n            </tbody>`}buildRow(e){return`<tr class="country-item">\n\t\t\t\t\t\t\t${this.buildImg(e.countryInfo,e.country)}\n\t\t\t\t\t\t\t ${this.buildTotalConfirmed(e[r.keyValue])}\n\t\t\t\t\t  </tr>`}buildImg(e,t){return`<td><img src="${e.flag}"><span class="country-name">${t}</span></td>`}buildTotalConfirmed(e){return`<td class="cases-total">\n              ${e}\n            </td>`}}(v),b=new class{constructor(){this.globalCasesData=[],this.loadingData=this.init()}async init(){await this.fetchGlobalData()}async fetchGlobalData(){try{const e=await fetch("https://disease.sh/v3/covid-19/all");this.globalCasesData[0]=await e.json(),o(this.globalCasesData)}catch(e){console.error(e)}}},k=new class{constructor(){this.viewWrapper=document.createElement("div"),this.viewWrapper.className="cases-wrap"}render(e,t){return this.viewWrapper.innerHTML=this.buildList(e,t),this.viewWrapper}buildList(e,t){return` <table class="stat-table table">\n    ${e.countryInfo?this.buildImg(e.countryInfo,e.country):""}\n              ${this.buildHeadTable()}\n            <tbody>\n               <tr>\n\t\t\t\t\t\t\t\t\t<td class="cases-info">${e["cases"+t]}</td>\n\t\t\t\t\t\t\t\t\t<td class="cases-info">${e["deaths"+t]}</td>\n\t\t\t\t\t\t\t\t\t<td class="cases-info">${e["recovered"+t]}</td>\n\t\t\t\t\t\t\t\t</tr>\n            </tbody>\n            </table>`}buildHeadTable(){return'<thead>\n          <tr class="table-cases-wrap">\n            <th class="cases-head">Total cases</th>\n              <th class="cases-head">Total deaths</th>\n              <th class="cases-head">Total healed</th>\n          </tr>\n          </thead>\n         '}buildImg(e,t){return`<div class="country-info">\n               <img src="${e.flag}" alt="">\n               <h3>${t}</h3>\n            </div>`}},g=new class{constructor(){this.elements={main:null,keysContainer:null,keys:[]},this.eventHandlers={oninput:null,onclose:null},this.properties={value:"",capsLock:!1}}init(){this.elements.main=document.createElement("div"),this.elements.keysContainer=document.createElement("div"),this.elements.main.classList.add("keyboard","keyboard--hidden"),this.elements.keysContainer.classList.add("keyboard__keys"),this.elements.keysContainer.appendChild(this.createKeys()),this.elements.keys=this.elements.keysContainer.querySelectorAll(".keyboard__key"),this.elements.main.appendChild(this.elements.keysContainer),document.querySelector(".footer").appendChild(this.elements.main),document.querySelectorAll(".use-keyboard-input").forEach(e=>{e.addEventListener("focus",()=>{this.open(e.value,t=>{e.value=t})})})}createKeys(){const e=document.createDocumentFragment(),t=e=>`<i class="material-icons">${e}</i>`;return["1","2","3","4","5","6","7","8","9","0","backspace","q","w","e","r","t","y","u","i","o","p","caps","a","s","d","f","g","h","j","k","l","enter","done","z","x","c","v","b","n","m",",",".","?","space"].forEach(a=>{const r=document.createElement("button"),s=-1!==["backspace","p","enter","?"].indexOf(a);switch(r.setAttribute("type","button"),r.classList.add("keyboard__key"),a){case"backspace":r.classList.add("keyboard__key--wide"),r.innerHTML=t("backspace"),r.addEventListener("click",()=>{p(),document.querySelector(".search-country").value=document.querySelector(".search-country").value.substring(0,document.querySelector(".search-country").value.length-1),this.triggerEvent("oninput")});break;case"caps":r.classList.add("keyboard__key--wide","keyboard__key--activatable"),r.innerHTML=t("keyboard_capslock"),r.addEventListener("click",()=>{p(),this.toggleCapsLock(),r.classList.toggle("keyboard__key--active",this.properties.capsLock)});break;case"enter":r.classList.add("keyboard__key--wide"),r.innerHTML=t("keyboard_return"),r.addEventListener("click",()=>{p(),document.querySelector(".search-country").value+="\n",this.triggerEvent("oninput")});break;case"space":r.classList.add("keyboard__key--extra-wide"),r.innerHTML=t("space_bar"),r.addEventListener("click",()=>{p(),document.querySelector(".search-country").value+=" ",this.triggerEvent("oninput")});break;case"done":r.classList.add("keyboard__key--wide","keyboard__key--dark"),r.innerHTML=t("done"),r.addEventListener("click",()=>{p(),this.close(),this.triggerEvent("onclose")});break;default:r.textContent=a.toLowerCase(),r.addEventListener("click",()=>{p(),document.querySelector(".search-country").value+=this.properties.capsLock?a.toUpperCase():a.toLowerCase(),this.triggerEvent("oninput")})}e.appendChild(r),s&&e.appendChild(document.createElement("br"))}),e}triggerEvent(e){"function"==typeof this.eventHandlers[e]&&this.eventHandlers[e](document.querySelector(".search-country").value)}toggleCapsLock(){this.properties.capsLock=!this.properties.capsLock;for(const e of this.elements.keys)0===e.childElementCount&&(e.textContent=this.properties.capsLock?e.textContent.toUpperCase():e.textContent.toLowerCase())}open(e,t,a){document.querySelector(".search-country").value=e||"",this.eventHandlers.oninput=t,this.eventHandlers.onclose=a,this.elements.main.classList.remove("keyboard--hidden")}close(){document.querySelector(".search-country").value="",this.eventHandlers.oninput=oninput,this.eventHandlers.onclose=onclose,this.elements.main.classList.add("keyboard--hidden")}},f=new class{constructor(e){this.dataGraph=e,this.apiAnswer={},this.dataTimeAll=null,this.loadingData=this.initData()}async initData(){await this.fetchDataGraph()}async fetchDataGraph(){try{const e=await fetch("https://disease.sh/v3/covid-19/historical/all?lastdays=300");this.apiAnswer=await e.json(),this.getDataWorld(this.apiAnswer)}catch(e){console.error(e)}}async fetchDataCountry(e){const t=`https://disease.sh/v3/covid-19/historical/${e}?lastdays=366`;try{const e=await fetch(t);this.dataTimeAll=await e.json(),this.getDataWorld(this.dataTimeAll.timeline)}catch(e){console.error(e)}}getDataWorld(e){this.dataGraph.cases.value=Object.values(e.cases),this.dataGraph.cases.date=Object.keys(e.cases),this.dataGraph.deaths.value=Object.values(e.deaths),this.dataGraph.deaths.date=Object.keys(e.deaths),this.dataGraph.recovered.value=Object.values(e.recovered),this.dataGraph.recovered.date=Object.keys(e.recovered)}}({cases:{date:[],value:[]},deaths:{date:[],value:[]},recovered:{date:[],value:[]},casesToday:{date:[],value:[]},deathsToday:{date:[],value:[]},recoveredToday:{date:[],value:[]},casesTodayPerOneHundredThousand:{date:[],value:[]},deathsTodayPerOneHundredThousand:{date:[],value:[]},recoveredTodayPerOneHundredThousand:{date:[],value:[]},casesPerOneHundredThousand:{date:[],value:[]},deathsPerOneHundredThousand:{date:[],value:[]},recoveredPerOneHundredThousand:{date:[],value:[]}}),S=new class{constructor(e){this.dataStyle=e}render(e,t){document.querySelector(".canvas-container").innerHTML="";const a=document.createElement("canvas");a.className="canvas-graph popChart",document.querySelector(".canvas-container").append(a),Chart.defaults.global.defaultFontColor="white",this.dataStyle.data.labels=t[""+e].date,this.dataStyle.data.datasets[0].data=t[""+e].value;new Chart(a,this.dataStyle)}}({type:"bar",data:{datasets:[{data:[],backgroundColor:"#5bfff7"}]},options:{legend:{display:!1}}});function P(){document.querySelector(".country-wrap").append(w.render())}function T(e,t){document.querySelector(".global-info").append(k.render(e,t))}f.loadingData.then(()=>S.render(r.switchParameterState,f.dataGraph)),b.loadingData.then(()=>{document.querySelector(".global-info").append(k.render(b.globalCasesData[0],s.keyView)),document.querySelector(".global-data").innerHTML=m(b.globalCasesData[0].cases)}),P(),document.querySelector(".left-container .select-parameter").addEventListener("change",({target:e})=>{r.switchParameterState=e.value,r.keyValue=h(r.switchParameterState,r.isSwitchParameterPeriod,r.isSwitchParameterValue),P(),S.render(r.switchParameterState,f.dataGraph)}),document.querySelector(".graph-container .select-parameter").addEventListener("change",({target:e})=>{n.switchParameterState=e.value,n.keyView=h(n.switchParameterState,n.isSwitchParameterPeriod,n.isSwitchParameterValue),S.render(n.keyView,f.dataGraph)}),[...document.querySelectorAll(".global-info__switch")].forEach(e=>{e.addEventListener("change",async({target:e})=>{y(e,r),r.keyValue=h(r.switchParameterState,r.isSwitchParameterPeriod,r.isSwitchParameterValue),l(v.countriesData,r.keyValue),P();T(r.isClickCountry?s.countryData:b.globalCasesData[0],s.keyView),d(f.dataGraph,b.globalCasesData[0].population),S.render(r.keyValue,f.dataGraph)})}),[...document.querySelectorAll(".full-screen__btn")].forEach(e=>{e.addEventListener("click",({target:e})=>{e.closest(".box-shadow").classList.toggle("full-screen__active")})}),[...document.querySelectorAll(".country-info__switch")].forEach(e=>{e.addEventListener("change",({target:e})=>{y(e,s),h(s.switchParameterState,s.isSwitchParameterPeriod,s.isSwitchParameterValue);T(r.isClickCountry?s.countryData:b.globalCasesData[0],s.keyView)})}),document.querySelector(".global-table").addEventListener("click",async({target:e})=>{const t=e.closest(".country-item").querySelector(".country-name").textContent;r.isClickCountry=!0,s.countryData=v.countriesData.find(e=>e.country===t),T(s.countryData,s.keyView),await f.fetchDataCountry(t);const a=s.countryData.population;d(f.dataGraph,a),S.render(r.keyValue,f.dataGraph)}),[...document.querySelectorAll(".graph-info__switch")].forEach(e=>{e.addEventListener("change",({target:e})=>{y(e,n),n.keyView=h(n.switchParameterState,n.isSwitchParameterPeriod,n.isSwitchParameterValue),d(f.dataGraph,b.globalCasesData[0].population),S.render(n.keyView,f.dataGraph)})}),document.getElementById("input-search").addEventListener("keyup",()=>p()),window.addEventListener("DOMContentLoaded",()=>{g.init()})}},[["+wUL",1]]]);